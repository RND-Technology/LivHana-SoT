<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HNC Cockpit Controls - Auto-Toon Reality Engine</title>
    <link href="https://fonts.googleapis.com/css2?family=Bangers&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460);
            color: #fff;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .header {
            background: linear-gradient(90deg, #a00, #d00);
            padding: 20px 0;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header h1 {
            font-family: 'Bangers', cursive;
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 3px 3px #500;
            letter-spacing: 2px;
        }

        .header .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .status-bar {
            background: rgba(0,0,0,0.2);
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9em;
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #0f0;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .control-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .control-panel {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }

        .panel-title {
            font-family: 'Bangers', cursive;
            font-size: 1.8em;
            margin-bottom: 20px;
            color: #ff6b6b;
            text-align: center;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 700;
            color: #ffd93d;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 8px;
            background: rgba(255,255,255,0.1);
            color: #fff;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #ff6b6b;
            background: rgba(255,255,255,0.2);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .btn {
            background: linear-gradient(45deg, #ff6b6b, #ff8e8e);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            font-size: 14px;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255,107,107,0.4);
        }

        .btn-success {
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
        }

        .btn-warning {
            background: linear-gradient(45deg, #feca57, #ff9ff3);
        }

        .btn-danger {
            background: linear-gradient(45deg, #ff3838, #ff6b6b);
        }

        .btn-info {
            background: linear-gradient(45deg, #74b9ff, #0984e3);
        }

        .keyword-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }

        .keyword-tag {
            background: rgba(255,107,107,0.3);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            border: 1px solid rgba(255,107,107,0.5);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .keyword-tag:hover {
            background: rgba(255,107,107,0.5);
            transform: scale(1.05);
        }

        .keyword-tag .remove {
            margin-left: 8px;
            cursor: pointer;
            font-weight: bold;
        }

        .channel-list {
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 8px;
            padding: 10px;
            background: rgba(0,0,0,0.2);
        }

        .channel-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .channel-item:last-child {
            border-bottom: none;
        }

        .channel-info {
            flex: 1;
        }

        .channel-name {
            font-weight: 700;
            color: #ffd93d;
        }

        .channel-url {
            font-size: 12px;
            color: #ccc;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .metric-card {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .metric-value {
            font-size: 2em;
            font-weight: 700;
            color: #4ecdc4;
            margin-bottom: 5px;
        }

        .metric-label {
            font-size: 0.9em;
            color: #ccc;
        }

        .api-status {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: rgba(0,0,0,0.3);
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .api-status.connected {
            border-left: 4px solid #4ecdc4;
        }

        .api-status.disconnected {
            border-left: 4px solid #ff6b6b;
        }

        .api-status .status-text {
            font-weight: 700;
        }

        .api-status.connected .status-text {
            color: #4ecdc4;
        }

        .api-status.disconnected .status-text {
            color: #ff6b6b;
        }

        .content-preview {
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .preview-title {
            font-family: 'Bangers', cursive;
            font-size: 1.5em;
            color: #ffd93d;
            margin-bottom: 15px;
        }

        .episode-card {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .episode-title {
            font-weight: 700;
            color: #ff6b6b;
            margin-bottom: 8px;
        }

        .episode-meta {
            font-size: 0.9em;
            color: #ccc;
            margin-bottom: 10px;
        }

        .episode-script {
            font-size: 0.9em;
            line-height: 1.4;
            color: #ddd;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(76, 205, 196, 0.9);
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            transform: translateX(400px);
            transition: transform 0.3s ease;
            z-index: 1000;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.error {
            background: rgba(255, 107, 107, 0.9);
        }

        .notification.warning {
            background: rgba(254, 202, 87, 0.9);
        }

        @media (max-width: 768px) {
            .control-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .container {
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>🎬 HNC COCKPIT CONTROLS</h1>
        <div class="subtitle">Auto-Toon Reality Engine - High Noon Cartoon Production</div>
    </div>

    <div class="status-bar">
        <div class="status-indicator">
            <div class="status-dot"></div>
            <span>Content Engine: ACTIVE</span>
        </div>
        <div class="status-indicator">
            <div class="status-dot"></div>
            <span>Auto-Toon: READY</span>
        </div>
        <div class="status-indicator">
            <div class="status-dot"></div>
            <span>Episodes Generated: <span id="episodeCount">0</span></span>
        </div>
        <div class="status-indicator">
            <div class="status-dot"></div>
            <span>Last Update: <span id="lastUpdate">Just now</span></span>
        </div>
    </div>

    <div class="container">
        <div class="control-grid">
            <!-- KEYWORDS CONTROL PANEL -->
            <div class="control-panel">
                <div class="panel-title">🔍 KEYWORDS CONTROL</div>
                
                <div class="form-group">
                    <label for="keywordInput">Add Keywords:</label>
                    <input type="text" id="keywordInput" placeholder="Enter keyword (cannabis, Texas, hemp, etc.)">
                    <button class="btn" onclick="addKeyword()">Add Keyword</button>
                </div>

                <div class="form-group">
                    <label>Active Keywords:</label>
                    <div class="keyword-tags" id="keywordTags">
                        <div class="keyword-tag">cannabis <span class="remove" onclick="removeKeyword('cannabis')">×</span></div>
                        <div class="keyword-tag">Texas <span class="remove" onclick="removeKeyword('Texas')">×</span></div>
                        <div class="keyword-tag">hemp <span class="remove" onclick="removeKeyword('hemp')">×</span></div>
                        <div class="keyword-tag">THC <span class="remove" onclick="removeKeyword('THC')">×</span></div>
                        <div class="keyword-tag">legalization <span class="remove" onclick="removeKeyword('legalization')">×</span></div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="keywordWeight">Keyword Weight:</label>
                    <select id="keywordWeight">
                        <option value="high">High Priority</option>
                        <option value="medium">Medium Priority</option>
                        <option value="low">Low Priority</option>
                    </select>
                </div>

                <button class="btn btn-success" onclick="saveKeywords()">Save Keywords</button>
                <button class="btn btn-warning" onclick="loadKeywords()">Load Keywords</button>
            </div>

            <!-- YOUTUBE CHANNELS CONTROL PANEL -->
            <div class="control-panel">
                <div class="panel-title">📺 YOUTUBE CHANNELS</div>
                
                <div class="form-group">
                    <label for="channelUrl">Add YouTube Channel:</label>
                    <input type="text" id="channelUrl" placeholder="https://youtube.com/@channelname">
                    <button class="btn" onclick="addChannel()">Add Channel</button>
                </div>

                <div class="form-group">
                    <label>Monitored Channels:</label>
                    <div class="channel-list" id="channelList">
                        <div class="channel-item">
                            <div class="channel-info">
                                <div class="channel-name">Cannabis Legalization News</div>
                                <div class="channel-url">@cannabisnews</div>
                            </div>
                            <button class="btn btn-danger" onclick="removeChannel('cannabisnews')">Remove</button>
                        </div>
                        <div class="channel-item">
                            <div class="channel-info">
                                <div class="channel-name">Texas Hemp Updates</div>
                                <div class="channel-url">@texashemp</div>
                            </div>
                            <button class="btn btn-danger" onclick="removeChannel('texashemp')">Remove</button>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="channelAnalysis">Analysis Frequency:</label>
                    <select id="channelAnalysis">
                        <option value="realtime">Real-time</option>
                        <option value="hourly">Hourly</option>
                        <option value="daily">Daily</option>
                    </select>
                </div>

                <button class="btn btn-success" onclick="startChannelMonitoring()">Start Monitoring</button>
                <button class="btn btn-warning" onclick="stopChannelMonitoring()">Stop Monitoring</button>
            </div>

            <!-- NEWS FEEDS CONTROL PANEL -->
            <div class="control-panel">
                <div class="panel-title">📰 NEWS FEEDS CONTROL</div>
                
                <div class="form-group">
                    <label for="newsSource">Add News Source:</label>
                    <select id="newsSource">
                        <option value="newsapi">NewsAPI.org</option>
                        <option value="google">Google News</option>
                        <option value="twitter">Twitter API</option>
                        <option value="rss">RSS Feed</option>
                        <option value="reddit">Reddit API</option>
                    </select>
                    <input type="text" id="newsApiKey" placeholder="API Key (if required)">
                    <button class="btn" onclick="addNewsSource()">Add Source</button>
                </div>

                <div class="form-group">
                    <label>Active News Sources:</label>
                    <div id="newsSources">
                        <div class="api-status connected">
                            <span class="status-text">NewsAPI.org - Connected</span>
                            <span>✅</span>
                        </div>
                        <div class="api-status connected">
                            <span class="status-text">Google News - Connected</span>
                            <span>✅</span>
                        </div>
                        <div class="api-status disconnected">
                            <span class="status-text">Twitter API - Disconnected</span>
                            <span>❌</span>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="newsAlgorithm">Algorithm Control:</label>
                    <select id="newsAlgorithm">
                        <option value="trending">Trending Topics</option>
                        <option value="relevance">Relevance Score</option>
                        <option value="sentiment">Sentiment Analysis</option>
                        <option value="custom">Custom Algorithm</option>
                    </select>
                </div>

                <button class="btn btn-success" onclick="updateNewsAlgorithm()">Update Algorithm</button>
                <button class="btn btn-info" onclick="testNewsFeeds()">Test Feeds</button>
            </div>

            <!-- SOCIAL MEDIA CONTROL PANEL -->
            <div class="control-panel">
                <div class="panel-title">📱 SOCIAL MEDIA ACCOUNTS</div>
                
                <div class="form-group">
                    <label for="socialPlatform">Add Social Platform:</label>
                    <select id="socialPlatform">
                        <option value="twitter">Twitter/X</option>
                        <option value="instagram">Instagram</option>
                        <option value="tiktok">TikTok</option>
                        <option value="facebook">Facebook</option>
                        <option value="linkedin">LinkedIn</option>
                        <option value="whatsapp">WhatsApp</option>
                    </select>
                    <input type="text" id="socialAccount" placeholder="@username or account name">
                    <button class="btn" onclick="addSocialAccount()">Add Account</button>
                </div>

                <div class="form-group">
                    <label>Monitored Accounts:</label>
                    <div class="channel-list" id="socialAccounts">
                        <div class="channel-item">
                            <div class="channel-info">
                                <div class="channel-name">@ReggieAndDro</div>
                                <div class="channel-url">Twitter/X</div>
                            </div>
                            <button class="btn btn-danger" onclick="removeSocialAccount('ReggieAndDro')">Remove</button>
                        </div>
                        <div class="channel-item">
                            <div class="channel-info">
                                <div class="channel-name">@HighNoonCartoon</div>
                                <div class="channel-url">Instagram</div>
                            </div>
                            <button class="btn btn-danger" onclick="removeSocialAccount('HighNoonCartoon')">Remove</button>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="socialMonitoring">Monitoring Level:</label>
                    <select id="socialMonitoring">
                        <option value="posts">Posts Only</option>
                        <option value="comments">Posts + Comments</option>
                        <option value="engagement">Full Engagement</option>
                        <option value="trends">Trend Analysis</option>
                    </select>
                </div>

                <button class="btn btn-success" onclick="startSocialMonitoring()">Start Monitoring</button>
                <button class="btn btn-warning" onclick="stopSocialMonitoring()">Stop Monitoring</button>
            </div>

            <!-- CONTENT ENGINE CONTROL PANEL -->
            <div class="control-panel">
                <div class="panel-title">🎬 CONTENT ENGINE CONTROL</div>
                
                <div class="form-group">
                    <label for="episodeCount">Episodes to Generate:</label>
                    <input type="number" id="episodeCount" value="1" min="1" max="84">
                </div>

                <div class="form-group">
                    <label for="contentStyle">Content Style:</label>
                    <select id="contentStyle">
                        <option value="schoolhouse">School House Rock</option>
                        <option value="satirical">Satirical Comedy</option>
                        <option value="educational">Educational</option>
                        <option value="viral">Viral Optimization</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="characterFocus">Character Focus:</label>
                    <select id="characterFocus">
                        <option value="all">All Characters</option>
                        <option value="jesse">Jesse CEO</option>
                        <option value="livhana">Liv Hana AI</option>
                        <option value="chiefsteve">Chief Steve</option>
                        <option value="ltdan">Lt. Dan</option>
                        <option value="aubrey">Aubrey Awfuls</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="tpopWeight">TPOP Weighting:</label>
                    <select id="tpopWeight">
                        <option value="maximum">Maximum Viral</option>
                        <option value="balanced">Balanced</option>
                        <option value="educational">Educational Focus</option>
                        <option value="custom">Custom</option>
                    </select>
                </div>

                <button class="btn btn-success" onclick="generateEpisodes()">Generate Episodes</button>
                <button class="btn btn-info" onclick="previewContent()">Preview Content</button>
            </div>

            <!-- API KEYS CONTROL PANEL -->
            <div class="control-panel">
                <div class="panel-title">🔑 API KEYS MANAGEMENT</div>
                
                <div class="form-group">
                    <label for="newsApiKey">NewsAPI.org Key:</label>
                    <input type="password" id="newsApiKey" placeholder="Enter API key">
                    <button class="btn" onclick="saveApiKey('newsapi')">Save</button>
                </div>

                <div class="form-group">
                    <label for="youtubeApiKey">YouTube Data API Key:</label>
                    <input type="password" id="youtubeApiKey" placeholder="Enter API key">
                    <button class="btn" onclick="saveApiKey('youtube')">Save</button>
                </div>

                <div class="form-group">
                    <label for="twitterApiKey">Twitter API Key:</label>
                    <input type="password" id="twitterApiKey" placeholder="Enter API key">
                    <button class="btn" onclick="saveApiKey('twitter')">Save</button>
                </div>

                <div class="form-group">
                    <label for="whatsappApiKey">WhatsApp Business API Key:</label>
                    <input type="password" id="whatsappApiKey" placeholder="Enter API key">
                    <button class="btn" onclick="saveApiKey('whatsapp')">Save</button>
                </div>

                <div class="form-group">
                    <label for="openaiApiKey">OpenAI API Key:</label>
                    <input type="password" id="openaiApiKey" placeholder="Enter API key">
                    <button class="btn" onclick="saveApiKey('openai')">Save</button>
                </div>

                <button class="btn btn-success" onclick="testAllApis()">Test All APIs</button>
                <button class="btn btn-warning" onclick="loadApiKeys()">Load Saved Keys</button>
            </div>
        </div>

        <!-- METRICS DASHBOARD -->
        <div class="control-panel">
            <div class="panel-title">📊 PRODUCTION METRICS</div>
            
            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-value" id="totalEpisodes">0</div>
                    <div class="metric-label">Total Episodes</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="viralScore">0.0</div>
                    <div class="metric-label">Avg Viral Score</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="engagementRate">0%</div>
                    <div class="metric-label">Engagement Rate</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="productionTime">0s</div>
                    <div class="metric-label">Avg Production Time</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="keywordMatches">0</div>
                    <div class="metric-label">Keyword Matches</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="newsSources">0</div>
                    <div class="metric-label">Active News Sources</div>
                </div>
            </div>
        </div>

        <!-- CONTENT PREVIEW -->
        <div class="content-preview">
            <div class="preview-title">🎬 Latest Generated Content</div>
            <div id="contentPreview">
                <div class="episode-card">
                    <div class="episode-title">Episode 1: Jesse Meets Liv Hana</div>
                    <div class="episode-meta">Duration: 75s | Style: School House Rock | Characters: Jesse, Liv Hana</div>
                    <div class="episode-script">
                        Jesse: "Yo, I need some help running this empire..."<br>
                        Liv Hana AI EA appears: "Live and faithful, boss. What's the mission?"<br>
                        Jesse: "Deschedule cannabis, make Texas free, and sell some flower."<br>
                        Liv: "Roger that. Let's grow."
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="notification" id="notification"></div>

    <script>
        // Global state
        let keywords = ['cannabis', 'Texas', 'hemp', 'THC', 'legalization'];
        let channels = [];
        let socialAccounts = [];
        let apiKeys = {};
        let episodeCount = 0;

        // Initialize cockpit
        function initCockpit() {
            console.log('🎬 HNC Cockpit Controls Initialized');
            updateMetrics();
            loadSavedData();
        }

        // Keyword management
        function addKeyword() {
            const input = document.getElementById('keywordInput');
            const keyword = input.value.trim();
            if (keyword && !keywords.includes(keyword)) {
                keywords.push(keyword);
                updateKeywordTags();
                input.value = '';
                showNotification('Keyword added: ' + keyword, 'success');
            }
        }

        function removeKeyword(keyword) {
            keywords = keywords.filter(k => k !== keyword);
            updateKeywordTags();
            showNotification('Keyword removed: ' + keyword, 'success');
        }

        function updateKeywordTags() {
            const container = document.getElementById('keywordTags');
            container.innerHTML = keywords.map(keyword => 
                `<div class="keyword-tag">${keyword} <span class="remove" onclick="removeKeyword('${keyword}')">×</span></div>`
            ).join('');
        }

        function saveKeywords() {
            localStorage.setItem('hnc_keywords', JSON.stringify(keywords));
            showNotification('Keywords saved successfully!', 'success');
        }

        function loadKeywords() {
            const saved = localStorage.getItem('hnc_keywords');
            if (saved) {
                keywords = JSON.parse(saved);
                updateKeywordTags();
                showNotification('Keywords loaded successfully!', 'success');
            }
        }

        // Channel management
        function addChannel() {
            const url = document.getElementById('channelUrl').value.trim();
            if (url) {
                const channelName = extractChannelName(url);
                channels.push({ name: channelName, url: url });
                updateChannelList();
                document.getElementById('channelUrl').value = '';
                showNotification('Channel added: ' + channelName, 'success');
            }
        }

        function removeChannel(channelName) {
            channels = channels.filter(c => c.name !== channelName);
            updateChannelList();
            showNotification('Channel removed: ' + channelName, 'success');
        }

        function extractChannelName(url) {
            const match = url.match(/@([^/?]+)/);
            return match ? match[1] : 'Unknown Channel';
        }

        function updateChannelList() {
            const container = document.getElementById('channelList');
            container.innerHTML = channels.map(channel => `
                <div class="channel-item">
                    <div class="channel-info">
                        <div class="channel-name">${channel.name}</div>
                        <div class="channel-url">${channel.url}</div>
                    </div>
                    <button class="btn btn-danger" onclick="removeChannel('${channel.name}')">Remove</button>
                </div>
            `).join('');
        }

        // Social media management
        function addSocialAccount() {
            const platform = document.getElementById('socialPlatform').value;
            const account = document.getElementById('socialAccount').value.trim();
            if (account) {
                socialAccounts.push({ platform, account });
                updateSocialAccounts();
                document.getElementById('socialAccount').value = '';
                showNotification('Social account added: ' + account, 'success');
            }
        }

        function removeSocialAccount(account) {
            socialAccounts = socialAccounts.filter(s => s.account !== account);
            updateSocialAccounts();
            showNotification('Social account removed: ' + account, 'success');
        }

        function updateSocialAccounts() {
            const container = document.getElementById('socialAccounts');
            container.innerHTML = socialAccounts.map(account => `
                <div class="channel-item">
                    <div class="channel-info">
                        <div class="channel-name">${account.account}</div>
                        <div class="channel-url">${account.platform}</div>
                    </div>
                    <button class="btn btn-danger" onclick="removeSocialAccount('${account.account}')">Remove</button>
                </div>
            `).join('');
        }

        // API key management
        function saveApiKey(service) {
            const key = document.getElementById(service + 'ApiKey').value;
            if (key) {
                apiKeys[service] = key;
                localStorage.setItem('hnc_api_keys', JSON.stringify(apiKeys));
                showNotification(service + ' API key saved!', 'success');
            }
        }

        function loadApiKeys() {
            const saved = localStorage.getItem('hnc_api_keys');
            if (saved) {
                apiKeys = JSON.parse(saved);
                Object.keys(apiKeys).forEach(service => {
                    const input = document.getElementById(service + 'ApiKey');
                    if (input) input.value = apiKeys[service];
                });
                showNotification('API keys loaded!', 'success');
            }
        }

        function testAllApis() {
            showNotification('Testing all APIs...', 'info');
            // Simulate API testing
            setTimeout(() => {
                showNotification('All APIs tested successfully!', 'success');
            }, 2000);
        }

        // Content generation
        function generateEpisodes() {
            const count = document.getElementById('episodeCount').value;
            const style = document.getElementById('contentStyle').value;
            const character = document.getElementById('characterFocus').value;
            const tpop = document.getElementById('tpopWeight').value;

            showNotification('Generating ' + count + ' episodes...', 'info');
            
            // Simulate episode generation
            setTimeout(() => {
                episodeCount += parseInt(count);
                updateMetrics();
                showNotification('Episodes generated successfully!', 'success');
                updateContentPreview();
            }, 3000);
        }

        function previewContent() {
            showNotification('Generating content preview...', 'info');
            setTimeout(() => {
                updateContentPreview();
                showNotification('Content preview updated!', 'success');
            }, 1500);
        }

        function updateContentPreview() {
            const container = document.getElementById('contentPreview');
            const newEpisode = {
                title: `Episode ${episodeCount + 1}: ${getRandomTitle()}`,
                duration: Math.floor(Math.random() * 30) + 60,
                style: document.getElementById('contentStyle').value,
                characters: getRandomCharacters(),
                script: getRandomScript()
            };

            container.innerHTML = `
                <div class="episode-card">
                    <div class="episode-title">${newEpisode.title}</div>
                    <div class="episode-meta">Duration: ${newEpisode.duration}s | Style: ${newEpisode.style} | Characters: ${newEpisode.characters}</div>
                    <div class="episode-script">${newEpisode.script}</div>
                </div>
            ` + container.innerHTML;
        }

        function getRandomTitle() {
            const titles = [
                'The Empire Awakens',
                'Chief Steve\'s Dilemma',
                'Lt. Dan\'s Mission',
                'Aubrey\'s Awfuls',
                'The Hemp Revolution',
                'Texas Cannabis Tales',
                'The Great Descheduling'
            ];
            return titles[Math.floor(Math.random() * titles.length)];
        }

        function getRandomCharacters() {
            const chars = ['Jesse', 'Liv Hana', 'Chief Steve', 'Lt. Dan', 'Aubrey Awfuls'];
            return chars.slice(0, Math.floor(Math.random() * 3) + 2).join(', ');
        }

        function getRandomScript() {
            const scripts = [
                'Jesse: "The markets are bullish, Liv Hana!"<br>Liv Hana: "Data analyzed, boss!"<br>Chief Steve: "But the optics!"',
                'Lt. Dan: "Mission critical!"<br>Jesse: "This is the way!"<br>Aubrey: "That\'s awful!"',
                'Chief Steve: "We gotta crack down!"<br>Jesse: "Facts don\'t care about feelings!"<br>Liv Hana: "Roger that!"'
            ];
            return scripts[Math.floor(Math.random() * scripts.length)];
        }

        // Monitoring functions
        function startChannelMonitoring() {
            showNotification('Starting YouTube channel monitoring...', 'info');
        }

        function stopChannelMonitoring() {
            showNotification('Stopping YouTube channel monitoring...', 'warning');
        }

        function startSocialMonitoring() {
            showNotification('Starting social media monitoring...', 'info');
        }

        function stopSocialMonitoring() {
            showNotification('Stopping social media monitoring...', 'warning');
        }

        function updateNewsAlgorithm() {
            const algorithm = document.getElementById('newsAlgorithm').value;
            showNotification('News algorithm updated to: ' + algorithm, 'success');
        }

        function testNewsFeeds() {
            showNotification('Testing news feeds...', 'info');
            setTimeout(() => {
                showNotification('News feeds tested successfully!', 'success');
            }, 2000);
        }

        // Utility functions
        function updateMetrics() {
            document.getElementById('totalEpisodes').textContent = episodeCount;
            document.getElementById('viralScore').textContent = (Math.random() * 2 + 8).toFixed(1);
            document.getElementById('engagementRate').textContent = Math.floor(Math.random() * 30 + 70) + '%';
            document.getElementById('productionTime').textContent = Math.floor(Math.random() * 60 + 30) + 's';
            document.getElementById('keywordMatches').textContent = keywords.length;
            document.getElementById('newsSources').textContent = Math.floor(Math.random() * 5 + 3);
        }

        function loadSavedData() {
            loadKeywords();
            loadApiKeys();
        }

        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = 'notification ' + type + ' show';
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', initCockpit);

        // Auto-update metrics every 30 seconds
        setInterval(updateMetrics, 30000);
        setInterval(() => {
            document.getElementById('lastUpdate').textContent = new Date().toLocaleTimeString();
        }, 1000);
    </script>
</body>
</html>
