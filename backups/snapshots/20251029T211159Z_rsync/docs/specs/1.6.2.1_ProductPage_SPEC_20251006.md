<!-- Optimized: 2025-10-06 -->
<!-- RPM: 1.6.2.1.1.6.2.1_ProductPage_SPEC_20251006 -->
<!-- Session: E2E RPM DNA Application -->
<!-- AOM: RND (Reggie & Dro) -->
<!-- COI: TECHNOLOGY -->
<!-- RPM: HIGH -->
<!-- ACTION: BUILD -->

<!--
Optimized: 2025-10-03
RPM: 3.6.0.6.ops-technology-ship-status-documentation
Session: Dual-AI Collaboration - Sonnet Docs Sweep
-->
# Product Page Experience Specification (Tier-1)

**Status:** Draft • **Owner:** Liv Hana (Codex) • **Last Updated:** 2025-09-28

## 1. Scope

- Custom product experience for `ReggieAndDro.com` strains.
- Integrates incentivized reviews (Look/Smell/Taste/Effect), loyalty credits, and membership tiers.
- Surfaces compliance banners (21+, <0.3% Δ9 THC) and dynamic inventory from Lightspeed.

## 2. UX Overview

- **Hero Panel:** SKU selector, price ladder, availability, free shipping banner.
- **Compliance Badge:** Age gate + hemp disclaimer (always visible).
- **Review Stream:** Community stats (avg L/S/T/E), verified badges, pagination.
- **Review Intake Modal:** Collects metrics, free text, optional media (photo/video).
- **Loyalty Panel:** Free gram credits, membership tier progress, “ways to earn” list, available rewards.

## 3. Data Contracts

| Entity | Fields | Source |
|--------|--------|--------|
| Product | `id`, `name`, `sku`, `strainType`, `prices`, `inventory`, `complianceNotes` | Lightspeed API |
| Member Profile | `memberId`, `tier`, `points`, `freeGramCredits`, `recentRewards` | Loyalty DB |
| Review | `reviewId`, `memberId`, `productId`, `look/smell/taste/effect`, `headline`, `body`, `media`, `createdAt` | Product service |
| Loyalty Txn | `txnId`, `memberId`, `type`, `value`, `source`, `createdAt` | Loyalty DB |

## 4. API Endpoints (REST)

- `GET /api/product/:productId` → product + inventory + compliance.
- `GET /api/product/:productId/reviews` → paginated reviews + aggregates.
- `POST /api/product/:productId/reviews` → submit review, returns updated loyalty state.
- `GET /api/member/:memberId/loyalty` → tier, points, rewards.
- `POST /api/member/:memberId/loyalty/redeem` → redeem reward code.

## 5. Loyalty Logic

- Review submission awards: `+100` points, `+1` free gram credit (once per SKU per member).
- Photo/video bonus: `+150` points when media attached.
- Monthly bonus: scheduler awards `+500` points to active members.
- Tiers: `Member` (0), `Bronze (5k)`, `Silver (15k)`, `Gold (40k)`.

## 6. Integrations

- **Lightspeed** → nightly inventory sync + on-demand price lookup.
- **Square (legacy)** → interim sales data feed into BigQuery for metrics parity.
- **BigQuery/AlloyDB** → warehousing of reviews, loyalty transactions, and product performance.

## 7. Acceptance Criteria

- Product page renders with live Lightspeed inventory and compliance messaging.
- Member review submission persists L/S/T/E metrics and awards loyalty credit.
- Loyalty widget updates in real time after submission.
- Playwright E2E covers load → review submission → reward redemption.

## 8. Open Questions

- Need final design for audio cues on review success/fail states.
- Confirm membership tier names + thresholds with stakeholders.
- Determine service boundaries (extend existing backend vs new service).

<!-- Last verified: 2025-10-02 -->

<!-- Optimized: 2025-10-02 -->

<!-- Last updated: 2025-10-02 -->

<!-- Last optimized: 2025-10-02 -->
