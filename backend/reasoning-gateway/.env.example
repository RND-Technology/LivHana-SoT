# Reasoning Gateway Configuration
# Copy this to .env.runtime and fill in with op:// references or actual values for local dev

# Service Configuration
PORT=4002
LOG_LEVEL=info
NODE_ENV=development

# Redis Configuration
REDIS_HOST=localhost
REDIS_PORT=6379

# Queue Configuration
REASONING_QUEUE_NAME=voice-mode-reasoning-jobs
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000

# DeepSeek API (use 1Password reference in production)
DEEPSEEK_API_KEY=op://LivHana-Ops-Keys/DEEPSEEK_API_KEY/credential
DEEPSEEK_API_BASE_URL=http://localhost:8080/v1
DEEPSEEK_MODEL=deepseek-chat
DEEPSEEK_MAX_TOKENS=512
DEEPSEEK_TEMPERATURE=0.7

# JWT Configuration (MUST match across all services)
JWT_SECRET=op://LivHana-Ops-Keys/JWT_SECRET/password
JWT_AUDIENCE=op://LivHana-Ops-Keys/JWT_AUDIENCE/password
JWT_ISSUER=op://LivHana-Ops-Keys/JWT_ISSUER/password
JWT_ALGORITHMS=HS256

# Legacy service-specific vars (deprecated - use shared JWT_* above)
REASONING_JWT_SECRET=op://LivHana-Ops-Keys/JWT_SECRET/password
REASONING_JWT_AUDIENCE=op://LivHana-Ops-Keys/JWT_AUDIENCE/password
REASONING_JWT_ISSUER=op://LivHana-Ops-Keys/JWT_ISSUER/password

# Memory Learning System
ENABLE_MEMORY_LEARNING=true
MEMORY_REDIS_URL=redis://localhost:6379
MEMORY_ENCRYPTION_KEY=op://LivHana-Ops-Keys/MEMORY_ENCRYPTION_KEY/password
MEMORY_PROFILE_TTL_DAYS=2555
SESSION_TTL_SECONDS=3600
AUDIT_LOG_TTL_DAYS=2555
MEMORY_TTL_SECONDS=3600

# GCP Configuration (for Secret Manager and BigQuery)
# Production: Set GCP_PROJECT_ID to enable GCP Secret Manager
# Local Dev: Leave empty to use 1Password op:// references
GCP_PROJECT_ID=op://LivHana-Ops-Keys/GCP_PROJECT_ID/password

# BigQuery Integration (Optional)
ENABLE_BIGQUERY_MEMORY=false
MEMORY_DATASET_ID=customer_memory
BIGQUERY_BATCH_SIZE=100
BIGQUERY_FLUSH_INTERVAL_MS=30000

# Secret Manager Configuration
# AUTO_ROTATE_SECRETS=true enables 24-hour secret refresh from GCP
AUTO_ROTATE_SECRETS=true

# Vector Embeddings (Optional - requires OpenAI)
ENABLE_VECTOR_EMBEDDINGS=false
OPENAI_API_KEY=op://LivHana-Ops-Keys/OPENAI_API_KEY/credential
EMBEDDING_MODEL=text-embedding-3-small
EMBEDDING_DIMENSION=1536
VECTOR_TTL_DAYS=365
CONVERSATION_VECTOR_TTL_DAYS=90

# Self-Improvement Loop
ENABLE_SELF_IMPROVEMENT=true
ANTHROPIC_API_KEY=op://LivHana-Ops-Keys/ANTHROPIC_API_KEY/credential
IMPROVEMENT_ANALYSIS_INTERVAL_HOURS=24
IMPROVEMENT_MIN_INTERACTIONS=100
IMPROVEMENT_MIN_ERRORS_FOR_REPORT=5
IMPROVEMENT_MIN_FEATURE_REQUESTS=3
IMPROVEMENT_PERFORMANCE_THRESHOLD_MS=2000
IMPROVEMENT_MAX_AUTO_FIXES_PER_DAY=5
IMPROVEMENT_REQUIRE_APPROVAL=true
IMPROVEMENT_REQUIRE_TESTS=true
IMPROVEMENT_ALLOW_PRODUCTION_DEPLOY=false
