# Integration Service Configuration
# Handles Square, BigQuery, and LightSpeed integrations

# Service Configuration
PORT=3005
LOG_LEVEL=info
NODE_ENV=development

# CORS Configuration
CORS_ORIGINS=http://localhost:5173,http://localhost:3000

# JWT Authentication (MUST match across all services)
JWT_SECRET=op://LivHana-Ops-Keys/JWT_SECRET/password
JWT_AUDIENCE=op://LivHana-Ops-Keys/JWT_AUDIENCE/password
JWT_ISSUER=op://LivHana-Ops-Keys/JWT_ISSUER/password
JWT_ALGORITHMS=HS256

# Square API Configuration
SQUARE_ACCESS_TOKEN=op://LivHana-Ops-Keys/SQUARE_ACCESS_TOKEN/credential
SQUARE_LOCATION_ID=op://LivHana-Ops-Keys/SQUARE_LOCATION_ID/credential
SQUARE_APP_ID=op://LivHana-Ops-Keys/SQUARE_APP_ID/credential
SQUARE_API_VERSION=2024-06-15
SQUARE_API_BASE=https://connect.squareup.com/v2
SQUARE_SANDBOX=false

# BigQuery Configuration
GCP_PROJECT_ID=op://LivHana-Ops-Keys/GCP_PROJECT_ID/credential
GOOGLE_APPLICATION_CREDENTIALS=/path/to/gcp-key.json
BIGQUERY_ENABLED=true
BQ_DATASET=commerce
BQ_LOCATION=US
BQ_TABLE_PAYMENTS=square_payments
BQ_TABLE_CUSTOMERS=square_customers
BQ_TABLE_ITEMS=square_items
BQ_CACHE_TTL_MS=30000

# LightSpeed/KAJA API Configuration
KAJA_API_KEY=op://LivHana-Ops-Keys/KAJA_API_KEY/credential
KAJA_API_SECRET=op://LivHana-Ops-Keys/KAJA_API_SECRET/credential
KAJA_GATEWAY_ID=op://LivHana-Ops-Keys/KAJA_GATEWAY_ID/credential

# Age Verification Configuration (Internal Veriff Replacement)
# CRITICAL: This system unblocks $80K/month revenue
AGE_VERIFICATION_ENCRYPTION_KEY=op://LivHana-Ops-Keys/AGE_VERIFICATION_ENCRYPTION_KEY/password
# Encryption key MUST be exactly 32 bytes for AES-256-GCM
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex').substring(0, 32))"

# Age verification uses existing BigQuery tables:
# - commerce.age_verifications (verification records)
# - commerce.age_verification_attempts (audit log)
# Tables will be auto-created if they don't exist

# Compliance Settings
# TX DSHS CHP #690: 7-year record retention (automatic)
# CDFA PDP: Audit trail enabled (automatic)
# Rate limiting: 3 attempts per customer per 24 hours (automatic)
