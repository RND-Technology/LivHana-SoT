#!/usr/bin/env bash
# Liv Hana voice session attach helper
# Auto-respawns liv-voice if missing, then attaches

set -euo pipefail

ROOT="$(cd "$(dirname "${BASH_SOURCE[0]:-$0}")/.." && pwd)"
SESSION="liv-voice"

# Check if session exists, respawn if missing
if ! tmux has-session -t "$SESSION" 2>/dev/null; then
  echo "‚ö†Ô∏è  Voice session not running, spawning..."
  bash "$ROOT/scripts/claude_voice_session.sh" start
fi

# Attach to session
echo "üîó Attaching to $SESSION..."
tmux attach -t "$SESSION"
