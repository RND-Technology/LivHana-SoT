const e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,i=(t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s;import{j as n}from"./vendor-mui-core-q5oQAHKb.js";import{r as c}from"./vendor-react-D4912goE.js";import{a as d}from"./vendor-http-DpZCZaHO.js";import{m as o,A as x}from"./vendor-animation-BsmF1KEO.js";import{R as m,g as h,h as p,X as y,Y as b,T as g,i as j,j as u,k as v,l as N,m as f}from"./vendor-charts-lYaMtE2F.js";const w=()=>{let e,w;const[S,D]=c.useState({metrics:{todayRevenue:0,weekRevenue:0,monthRevenue:0,yearRevenue:0,totalTransactions:0,totalCustomers:0,avgOrderValue:0},topProducts:[],recentTransactions:[],historicalData:[],lastUpdate:null,mode:"unknown"}),[R,T]=c.useState(!0),[k,O]=c.useState(5e3),[E,C]=c.useState("dashboard"),I=()=>{return e=void 0,n=null,c=function*(){try{const c="https://reasoning-gateway-980910443251.us-central1.run.app",[o,x,m]=yield Promise.all([d.get(`${c}/api/bigquery/dashboard`),d.get(`${c}/api/bigquery/historical`),d.get(`${c}/api/bigquery/products`)]);D((e=((e,t)=>{for(var a in t||(t={}))r.call(t,a)&&i(e,a,t[a]);if(s)for(var a of s(t))l.call(t,a)&&i(e,a,t[a]);return e})({},o.data),n={historicalData:x.data.historical||[],dailyData:x.data.daily||[],monthlyData:x.data.monthly||[],catalog:m.data.products||[],topSellers:m.data.topSellers||[],mode:o.data.mode},t(e,a(n)))),T(!1)}catch(c){T(!1)}let e,n},new Promise((t,a)=>{var s=e=>{try{l(c.next(e))}catch(t){a(t)}},r=e=>{try{l(c.throw(e))}catch(t){a(t)}},l=e=>e.done?t(e.value):Promise.resolve(e.value).then(s,r);l((c=c.apply(e,n)).next())});let e,n,c};c.useEffect(()=>{I();const e=setInterval(I,k);return()=>clearInterval(e)},[k]);const P=({value:e,label:t,color:a})=>{const[s,r]=c.useState(0);return c.useEffect(()=>{const t=e/50;let a=0;const s=setInterval(()=>{a+=t,a>=e&&(a=e,clearInterval(s)),r(a)},20);return()=>clearInterval(s)},[e]),n.jsxs(o.div,{className:"bg-gradient-to-br from-gray-900 to-black rounded-xl p-6 border-2",style:{borderColor:a},whileHover:{scale:1.02,boxShadow:`0 0 30px ${a}50`},children:[n.jsx("p",{className:"text-gray-400 text-sm mb-2",children:t}),n.jsxs("div",{className:"text-4xl font-bold text-white",children:["$",s.toLocaleString("en-US",{maximumFractionDigits:0})]}),"TODAY"===t&&S.metrics.todayRevenue>1e3&&n.jsx("div",{className:"mt-2 text-green-400 text-sm animate-pulse",children:"🔥 ON FIRE!"})]})};return R?n.jsxs("div",{className:"min-h-screen bg-black flex items-center justify-center",children:[n.jsx(o.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"text-6xl",children:"💰"}),n.jsx("p",{className:"ml-4 text-2xl text-green-400",children:"Loading BigQuery Data..."})]}):n.jsxs("div",{className:"min-h-screen bg-black text-white p-6",children:[n.jsx(o.div,{className:"mb-8",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-5xl font-bold bg-gradient-to-r from-green-400 to-cyan-500 bg-clip-text text-transparent",children:"SQUARE LIVE COCKPIT - BIGQUERY POWERED"}),n.jsxs("p",{className:"text-gray-400 mt-2",children:["Real Data Since July 2023 | Updates Every ",k/1e3,"s | Last Update: ",new Date(S.lastUpdate).toLocaleTimeString()," | Mode: ",S.mode||"mock"]})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("select",{value:k,onChange:e=>O(Number(e.target.value)),className:"bg-gray-900 text-green-400 px-4 py-2 rounded-lg border border-green-500",children:[n.jsx("option",{value:1e3,children:"1 sec"}),n.jsx("option",{value:5e3,children:"5 sec"}),n.jsx("option",{value:1e4,children:"10 sec"}),n.jsx("option",{value:3e4,children:"30 sec"})]}),n.jsx(o.button,{onClick:I,className:"px-6 py-3 bg-gradient-to-r from-green-500 to-cyan-500 text-black font-bold rounded-lg",whileHover:{scale:1.05},whileTap:{scale:.95},children:"REFRESH NOW"})]})]})}),n.jsx("div",{className:"flex space-x-4 mb-8",children:["dashboard","transactions","products","analytics","leaderboard"].map(e=>n.jsx(o.button,{onClick:()=>C(e),className:"px-6 py-3 rounded-lg font-semibold transition-all "+(E===e?"bg-gradient-to-r from-green-500 to-cyan-500 text-black":"bg-gray-800 text-gray-400 hover:bg-gray-700"),whileHover:{scale:1.05},whileTap:{scale:.95},children:e.toUpperCase()},e))}),n.jsxs(x,{mode:"wait",children:["dashboard"===E&&n.jsxs(o.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[n.jsx(P,{value:S.metrics.todayRevenue,label:"TODAY",color:"#10b981"}),n.jsx(P,{value:S.metrics.weekRevenue,label:"THIS WEEK",color:"#06b6d4"}),n.jsx(P,{value:S.metrics.monthRevenue,label:"THIS MONTH",color:"#8b5cf6"}),n.jsx(P,{value:S.metrics.yearRevenue,label:"YEAR TO DATE",color:"#f59e0b"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[n.jsxs(o.div,{className:"bg-gray-900 rounded-xl p-6 border border-gray-700",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Total Transactions"}),n.jsx("p",{className:"text-3xl font-bold text-white",children:S.metrics.totalTransactions.toLocaleString()})]}),n.jsxs(o.div,{className:"bg-gray-900 rounded-xl p-6 border border-gray-700",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Total Customers"}),n.jsx("p",{className:"text-3xl font-bold text-white",children:S.metrics.totalCustomers.toLocaleString()})]}),n.jsxs(o.div,{className:"bg-gray-900 rounded-xl p-6 border border-gray-700",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Avg Order Value"}),n.jsxs("p",{className:"text-3xl font-bold text-white",children:["$",S.metrics.avgOrderValue.toFixed(2)]})]})]}),n.jsxs(o.div,{className:"bg-gray-900 rounded-xl p-6 border border-gray-700",children:[n.jsx("h3",{className:"text-xl font-bold text-green-400 mb-4",children:"Revenue Trend (30 Days)"}),n.jsx(m,{width:"100%",height:300,children:n.jsxs(h,{data:S.historicalData.slice(-30),children:[n.jsx("defs",{children:n.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.8}),n.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:0})]})}),n.jsx(p,{strokeDasharray:"3 3",stroke:"#374151"}),n.jsx(y,{dataKey:"date",stroke:"#9ca3af"}),n.jsx(b,{stroke:"#9ca3af"}),n.jsx(g,{contentStyle:{backgroundColor:"#111827",border:"1px solid #10b981"},labelStyle:{color:"#10b981"}}),n.jsx(j,{type:"monotone",dataKey:"revenue",stroke:"#10b981",fillOpacity:1,fill:"url(#colorRevenue)"})]})})]})]},"dashboard"),"transactions"===E&&n.jsx(o.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:n.jsxs("div",{className:"bg-gray-900 rounded-xl p-6 border border-gray-700",children:[n.jsx("h3",{className:"text-xl font-bold text-green-400 mb-4",children:"Recent Transactions (Live)"}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-gray-700",children:[n.jsx("th",{className:"text-left py-2 text-gray-400",children:"Time"}),n.jsx("th",{className:"text-left py-2 text-gray-400",children:"Transaction ID"}),n.jsx("th",{className:"text-left py-2 text-gray-400",children:"Amount"}),n.jsx("th",{className:"text-left py-2 text-gray-400",children:"Status"}),n.jsx("th",{className:"text-left py-2 text-gray-400",children:"Customer"})]})}),n.jsx("tbody",{children:S.recentTransactions.map((e,t)=>{let a;return n.jsxs(o.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*t},className:"border-b border-gray-800",children:[n.jsx("td",{className:"py-2 text-sm",children:new Date(e.created_at).toLocaleTimeString()}),n.jsx("td",{className:"py-2 text-sm font-mono text-gray-400",children:e.id.slice(-8)}),n.jsxs("td",{className:"py-2 text-lg font-bold text-green-400",children:["$",e.amount.toFixed(2)]}),n.jsx("td",{className:"py-2",children:n.jsx("span",{className:"px-2 py-1 rounded text-xs "+("COMPLETED"===e.status?"bg-green-900 text-green-300":"bg-yellow-900 text-yellow-300"),children:e.status})}),n.jsx("td",{className:"py-2 text-sm text-gray-400",children:(null==(a=e.customer_id)?void 0:a.slice(-8))||"Guest"})]},e.id)})})]})})]})},"transactions"),"products"===E&&n.jsx(o.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:n.jsxs("div",{className:"bg-gray-900 rounded-xl p-6 border border-gray-700",children:[n.jsx("h3",{className:"text-xl font-bold text-green-400 mb-4",children:"Top Selling Products"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:S.topProducts.slice(0,9).map((e,t)=>n.jsxs(o.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.05*t},className:"bg-black rounded-lg p-4 border border-gray-700",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("span",{className:"text-2xl font-bold text-cyan-400",children:["#",t+1]}),n.jsxs("span",{className:"text-green-400 font-bold",children:["$",e.revenue.toFixed(0)]})]}),n.jsx("p",{className:"text-white font-semibold",children:e.name}),n.jsxs("div",{className:"mt-2 text-sm text-gray-400",children:[n.jsxs("span",{children:[e.transactions," sales"]}),n.jsx("span",{className:"mx-2",children:"•"}),n.jsxs("span",{children:[e.units," units"]})]})]},e.name))})]})},"products"),"analytics"===E&&n.jsxs(o.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-gray-900 rounded-xl p-6 border border-gray-700",children:[n.jsx("h3",{className:"text-xl font-bold text-green-400 mb-4",children:"Daily Revenue (Last 7 Days)"}),n.jsx(m,{width:"100%",height:300,children:n.jsxs(u,{data:S.historicalData.slice(-7),children:[n.jsx(p,{strokeDasharray:"3 3",stroke:"#374151"}),n.jsx(y,{dataKey:"date",stroke:"#9ca3af"}),n.jsx(b,{stroke:"#9ca3af"}),n.jsx(g,{contentStyle:{backgroundColor:"#111827",border:"1px solid #10b981"}}),n.jsx(v,{dataKey:"revenue",fill:"#10b981"})]})})]}),n.jsxs("div",{className:"bg-gray-900 rounded-xl p-6 border border-gray-700",children:[n.jsx("h3",{className:"text-xl font-bold text-cyan-400 mb-4",children:"Customer Growth"}),n.jsx(m,{width:"100%",height:300,children:n.jsxs(N,{data:S.historicalData.slice(-30),children:[n.jsx(p,{strokeDasharray:"3 3",stroke:"#374151"}),n.jsx(y,{dataKey:"date",stroke:"#9ca3af"}),n.jsx(b,{stroke:"#9ca3af"}),n.jsx(g,{contentStyle:{backgroundColor:"#111827",border:"1px solid #06b6d4"}}),n.jsx(f,{type:"monotone",dataKey:"customers",stroke:"#06b6d4",strokeWidth:2,dot:!1})]})})]}),n.jsxs("div",{className:"bg-gray-900 rounded-xl p-6 border border-gray-700 lg:col-span-2",children:[n.jsx("h3",{className:"text-xl font-bold text-yellow-400 mb-4",children:"ROI Performance"}),n.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Initial Investment"}),n.jsx("p",{className:"text-2xl font-bold",children:"$50,000"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Total Revenue"}),n.jsxs("p",{className:"text-2xl font-bold text-green-400",children:["$",S.metrics.yearRevenue.toLocaleString()]})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"Net Profit"}),n.jsxs("p",{className:"text-2xl font-bold text-cyan-400",children:["$",(S.metrics.yearRevenue-5e4).toLocaleString()]})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-gray-400 text-sm",children:"ROI"}),n.jsxs("p",{className:"text-2xl font-bold text-yellow-400",children:[((S.metrics.yearRevenue-5e4)/5e4*100).toFixed(1),"%"]})]})]})]})]},"analytics"),"leaderboard"===E&&n.jsxs(o.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"bg-gray-900 rounded-xl p-6 border border-green-500",children:[n.jsx("h3",{className:"text-xl font-bold text-green-400 mb-4",children:"🏆 TOP PRODUCTS"}),S.topProducts.slice(0,5).map((e,t)=>n.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-800",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-2xl mr-3",children:0===t?"🥇":1===t?"🥈":2===t?"🥉":`#${t+1}`}),n.jsx("span",{className:"text-white",children:e.name})]}),n.jsxs("span",{className:"text-green-400 font-bold",children:["$",e.revenue.toFixed(0)]})]},e.name))]}),n.jsxs("div",{className:"bg-gray-900 rounded-xl p-6 border border-cyan-500",children:[n.jsx("h3",{className:"text-xl font-bold text-cyan-400 mb-4",children:"📅 BEST DAYS"}),null==(e=S.dailyData)?void 0:e.slice(0,5).map((e,t)=>n.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-800",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-2xl mr-3",children:0===t?"🔥":"📈"}),n.jsx("span",{className:"text-white",children:e.date})]}),n.jsxs("span",{className:"text-cyan-400 font-bold",children:["$",e.revenue.toFixed(0)]})]},e.date))]}),n.jsxs("div",{className:"bg-gray-900 rounded-xl p-6 border border-purple-500",children:[n.jsx("h3",{className:"text-xl font-bold text-purple-400 mb-4",children:"📊 BEST MONTHS"}),null==(w=S.monthlyData)?void 0:w.slice(0,5).map((e,t)=>n.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-800",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-2xl mr-3",children:0===t?"💰":"📆"}),n.jsx("span",{className:"text-white",children:new Date(e.month).toLocaleDateString("en-US",{month:"short",year:"numeric"})})]}),n.jsxs("span",{className:"text-purple-400 font-bold",children:["$",e.revenue.toFixed(0)]})]},e.month))]})]},"leaderboard")]}),n.jsx(o.div,{className:"mt-12 p-4 bg-gradient-to-r from-gray-900 to-gray-800 rounded-lg border border-gray-700",animate:{opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0},children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("span",{className:"text-green-400",children:"● BIGQUERY LIVE"}),n.jsx("span",{className:"text-gray-400",children:"|"}),n.jsx("span",{className:"text-cyan-400",children:"SQUARE SYNCED"}),n.jsx("span",{className:"text-gray-400",children:"|"}),n.jsx("span",{className:"text-yellow-400",children:"TIER-1 OPERATIONAL"})]}),n.jsx("div",{className:"text-gray-400 text-sm",children:"Data Pipeline: Square → BigQuery → Cache → Dashboard | Latency: <1s"})]})})]})};export{w as default};
