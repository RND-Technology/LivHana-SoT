{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "TruthOutput",
  "type": "object",
  "required": ["status", "summary", "claims", "rpm", "token_report"],
  "properties": {
    "status": {"type":"string","enum":["ok","failed"]},
    "summary": {"type":"string","minLength":10},
    "claims": {
      "type":"array","minItems":1,
      "items":{"type":"object","required":["id","claim","testable","reproducible","unambiguous","traceable","high_fidelity"],
        "properties":{
          "id":{"type":"string"},
          "claim":{"type":"string"},
          "testable":{"type":"object","required":["command","expected"],"properties":{"command":{"type":"string"},"expected":{"type":"string"}}},
          "reproducible":{"type":"object","required":["command_block"],"properties":{"command_block":{"type":"string"}}},
          "unambiguous":{"type":"object","required":["values"],"properties":{"values":{"type":"object"}}},
          "traceable":{"type":"object","required":["sources"],"properties":{"sources":{"type":"array","minItems":2,"items":{"type":"string"}}}},
          "high_fidelity":{"type":"object","required":["evidence_quality","independent_sources"],"properties":{"evidence_quality":{"type":"string"},"independent_sources":{"type":"integer","minimum":2}}}
        }
      }
    },
    "rpm": {
      "type":"object","required":["result","purpose","massive_actions"],
      "properties":{
        "result":{"type":"string"},
        "purpose":{"type":"string"},
        "massive_actions":{
          "type":"array","minItems":1,
          "items":{"type":"object","required":["action","profit_contribution_estimate","timeframe_hours_parallel","autonomous_capable","dependencies","guardrails"],
            "properties":{
              "action":{"type":"string"},
              "profit_contribution_estimate":{"type":"string"},
              "timeframe_hours_parallel":{"type":"number"},
              "autonomous_capable":{"type":"boolean"},
              "dependencies":{"type":"array","items":{"type":"string"}},
              "guardrails":{"type":"array","items":{"type":"string"}}
            }
          }
        }
      }
    },
    "token_report":{"type":"object","required":["input_used","output_target","compression_saved_pct"],
      "properties":{"input_used":{"type":"number"},"output_target":{"type":"number"},"compression_saved_pct":{"type":"number"}}}
  }
}
